<script type="text/javascript">

window.onload = function() {
        document.getElementById('project_name').onchange = changeIdentifier;
};

function changeIdentifier()
{
        var newName = tidyIdentText(document.getElementById('project_name').value);
		var parentProject = document.getElementById('project_parent_id') ? tidyIdentText(document.getElementById('project_parent_id').options[document.getElementById('project_parent_id').options.selectedIndex].text) : '';

        document.getElementById('project_identifier').value = (parentProject != '' ? (parentProject + '-') : '') + newName;
}

function tidyIdentText(txt)
{
	txt = txt.trim();
        txt = txt.replace(/[^A-Za-z0-9\-\_]/g, '-');
        txt = txt.toLowerCase();
        txt = txt.replace(/^[-]*/, '');
        txt = txt.replace(/[-]*$/, '')

	return txt;
}
</script>
